<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <header class="main-header">
        <nav class="main-nav">
            
            <a href="{{ url_for('superadmin.superadmin_dashboard') }}">Back to Dashboard</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </nav>
        <h1>Manage Users</h1>
    </header>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p class="flash-message {{ category }}">{{ message }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <script>
            setTimeout(() => {
                document.querySelectorAll('.flash-message').forEach(el => el.style.display = 'none');
            }, 3000);
        </script>
    <div style="display: flex; justify-content: flex-end; align-items: flex-end; margin-bottom: 0; width:100%;">
        <input type="text" id="userSearch" placeholder="Search users..." style="padding:6px 10px; width: 250px; border-radius: 4px; border: 1px solid #ccc; font-size: 1rem; margin-bottom:4px; margin-right:2px;">
    </div>
    <table id="usersTable">
        <tr>
            <th>ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Actions</th>
        </tr>
        {% for user in users %}
        <tr>
            <td>{{ user[0] }}</td>
            <td>{{ user[1] }}</td>
            <td>{{ user[3] }}</td>
            <td>{{ user[6] }}</td>
            <td>
                <a href="{{ url_for('superadmin.superadmin_edit_user', user_id=user[0]) }}">Edit</a>
                <a href="#" class="delete-link" data-href="{{ url_for('superadmin.superadmin_delete_user', user_id=user[0]) }}">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </table>
    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal" style="display:none;position:fixed;z-index:1000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.35);justify-content:center;align-items:center;">
      <div style="background:#fff;padding:32px 28px 22px 28px;border-radius:10px;box-shadow:0 2px 16px rgba(0,0,0,0.18);max-width:350px;text-align:center;">
        <div style="font-size:1.15rem;font-weight:500;margin-bottom:18px;">Are you sure you want to delete this user?</div>
        <div style="color:#b00;font-size:0.98rem;margin-bottom:22px;">Note: this action cannot be undone</div>
        <button id="confirmDeleteBtn" style="background:#c00;color:#fff;padding:7px 22px;border:none;border-radius:4px;font-size:1rem;cursor:pointer;margin-right:10px;">Delete</button>
        <button id="cancelDeleteBtn" style="background:#eee;color:#222;padding:7px 22px;border:none;border-radius:4px;font-size:1rem;cursor:pointer;">Cancel</button>
      </div>
    </div>
    <script>
    document.getElementById('userSearch').addEventListener('input', function() {
        const filter = this.value.toLowerCase();
        const rows = document.querySelectorAll('#usersTable tr');
        for (let i = 1; i < rows.length; i++) {
            const row = rows[i];
            const text = row.textContent.toLowerCase();
            row.style.display = text.includes(filter) ? '' : 'none';
        }
    });

    </script>
     <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <p><a href="{{url_for('superadmin.superadmin_dashboard')}}">Back to Dashboard</a></p>
</body>
</html>